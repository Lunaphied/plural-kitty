{
  "db": "PostgreSQL",
  "0826db2c7d44296fa13f3255fd24736456cf5e95d35503cba0d63e62f132419e": {
    "describe": {
      "columns": [
        {
          "name": "bool",
          "ordinal": 0,
          "type_info": "Bool"
        }
      ],
      "nullable": [
        null
      ],
      "parameters": {
        "Left": [
          "Text",
          "Text"
        ]
      }
    },
    "query": "SELECT true FROM read_msgs WHERE room_id = $1 AND event_id = $2"
  },
  "0eee0ca234ff4766ba2ca1275173aaad25122e3d5e6022cf4e6013168950e7b5": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Text",
          "Text",
          "Text"
        ]
      }
    },
    "query": "UPDATE identities SET activators = array_append(activators, $3) WHERE mxid = $1 AND name = $2"
  },
  "18fe29cd48a1ccd0378e00dda8c5a2312cf06915192b97c786b4b869a06e0729": {
    "describe": {
      "columns": [
        {
          "name": "track_account",
          "ordinal": 0,
          "type_info": "Bool"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Text",
          "Text"
        ]
      }
    },
    "query": "UPDATE identities SET track_account = NOT track_account\n        WHERE mxid = $1 AND name = $2 RETURNING track_account"
  },
  "1f3385378e98c94be47c83fff6c7dccfa4abbee6e261dd6109c929d08fbdfea3": {
    "describe": {
      "columns": [
        {
          "name": "name",
          "ordinal": 0,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      }
    },
    "query": "SELECT name FROM identities WHERE mxid = $1;"
  },
  "201cc042f1d9e53d73aef1027b7f08aabffabb77092d4044bea247fa58b4bfa5": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Text",
          "Text"
        ]
      }
    },
    "query": "UPDATE users SET current_ident = $2 WHERE mxid = $1;"
  },
  "31a22d83d99c03d00199314f4465c67ddf130edcb785614ca963e5344fa04c88": {
    "describe": {
      "columns": [
        {
          "name": "x",
          "ordinal": 0,
          "type_info": "Int4"
        }
      ],
      "nullable": [
        null
      ],
      "parameters": {
        "Left": [
          "Text",
          "Text"
        ]
      }
    },
    "query": "SELECT 1 as x FROM identities WHERE mxid = $1 AND name = $2;"
  },
  "3ca5130e29d7d7d1e2f0b7b844f4fc8079088e87063a2648f7dc7cc4cbc5cbf6": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Text",
          "Text"
        ]
      }
    },
    "query": "DELETE FROM identities WHERE mxid = $1 AND name = $2;"
  },
  "48413dd36ae666560276076dc5d056e1005de0b4bc80f0aff1cc86534133e1ad": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Text",
          "Text",
          "Text"
        ]
      }
    },
    "query": "UPDATE identities SET display_name = $3 WHERE mxid = $1 AND name = $2;"
  },
  "5ee9592086809e13e52630235c0d61cc98bdf26cdbdbe4c8d1ef90bdab6a0b31": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Text",
          "Text"
        ]
      }
    },
    "query": "INSERT INTO identities (mxid, name) VALUES ($1, $2);"
  },
  "6122ec3162169bb6e496997ae09bca71897433e948deecf5ec803c69976456ed": {
    "describe": {
      "columns": [
        {
          "name": "mxid",
          "ordinal": 0,
          "type_info": "Text"
        },
        {
          "name": "name",
          "ordinal": 1,
          "type_info": "Text"
        },
        {
          "name": "display_name",
          "ordinal": 2,
          "type_info": "Text"
        },
        {
          "name": "avatar",
          "ordinal": 3,
          "type_info": "Text"
        },
        {
          "name": "track_account",
          "ordinal": 4,
          "type_info": "Bool"
        },
        {
          "name": "activators",
          "ordinal": 5,
          "type_info": "TextArray"
        }
      ],
      "nullable": [
        false,
        false,
        true,
        true,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Text",
          "Text"
        ]
      }
    },
    "query": "SELECT * FROM identities WHERE mxid = $1 AND name = $2"
  },
  "643a51b3ddae46927ee2c81d3c152c790460511efb1218a7fc2584083e064722": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Text",
          "Text"
        ]
      }
    },
    "query": "UPDATE identities SET display_name = null WHERE mxid = $1 AND name = $2;"
  },
  "6b4766b070a49a70462e86a861a01ec92974cf51ed7c6536f09fa6d77d0b9eb4": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Text",
          "Text",
          "Text"
        ]
      }
    },
    "query": "UPDATE identities SET avatar = $3 WHERE mxid = $1 AND name = $2;"
  },
  "72bdabfe128abb0e7a406abee9b2ab56db980bff0a008136595545abbd8cfe62": {
    "describe": {
      "columns": [
        {
          "name": "name!",
          "ordinal": 0,
          "type_info": "Text"
        }
      ],
      "nullable": [
        true
      ],
      "parameters": {
        "Left": [
          "Text",
          "Text"
        ]
      }
    },
    "query": "\n        UPDATE users\n        SET current_ident = sub.name\n        FROM (\n            SELECT name\n            FROM identities\n            WHERE mxid = $1 AND $2 = ANY(activators)\n        ) AS sub\n        WHERE mxid = $1\n        RETURNING current_ident AS \"name!\"\n    "
  },
  "819b12febe13b45e7587218b87a3993c2f2715a06422aaed91830aa28abd7e3e": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Text",
          "Text",
          "Text"
        ]
      }
    },
    "query": "UPDATE identities SET activators = array_remove(activators, $3) WHERE mxid = $1 AND name = $2"
  },
  "959abe9f3d64eb65bac7f8655856f1a5ed96f74c6d576613e31da9b4ed1b33f5": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Text",
          "Text",
          "Text"
        ]
      }
    },
    "query": "\n        UPDATE identities\n        SET \n            display_name = $2,\n            avatar = $3\n        WHERE mxid = $1\n        AND track_account = TRUE\n    "
  },
  "965bf74224a06b1438f37b0200953676b8dee2026864b435537b2b355173154c": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Text",
          "Text"
        ]
      }
    },
    "query": "UPDATE identities SET avatar = null WHERE mxid = $1 AND name = $2;"
  },
  "985f4f9cb1ace29d892fe0256a11516a023bfd54d246904b446e3dcdc1165727": {
    "describe": {
      "columns": [
        {
          "name": "mxid",
          "ordinal": 0,
          "type_info": "Text"
        },
        {
          "name": "name",
          "ordinal": 1,
          "type_info": "Text"
        },
        {
          "name": "display_name",
          "ordinal": 2,
          "type_info": "Text"
        },
        {
          "name": "avatar",
          "ordinal": 3,
          "type_info": "Text"
        },
        {
          "name": "activators",
          "ordinal": 4,
          "type_info": "TextArray"
        },
        {
          "name": "track_account",
          "ordinal": 5,
          "type_info": "Bool"
        }
      ],
      "nullable": [
        false,
        false,
        true,
        true,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      }
    },
    "query": "\n        SELECT\n            i.mxid AS mxid,\n            i.name AS name, \n            i.display_name AS display_name,\n            i.avatar AS avatar,\n            i.activators AS activators,\n            i.track_account AS track_account\n        FROM users AS u \n            JOIN identities AS i ON u.mxid = i.mxid AND u.current_ident = i.name\n        WHERE u.mxid = $1\n        "
  },
  "b47a3281b2e9a170be27b5d2df5edcc3a229cf32368cc601d742b9af2dab7291": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Text",
          "Text"
        ]
      }
    },
    "query": "INSERT INTO read_msgs(room_id, event_id) \n                     VALUES ($1, $2) ON CONFLICT (room_id) DO \n                     UPDATE SET event_id = $2 WHERE read_msgs.room_id = $1"
  },
  "c71e4d216ef5ce37634465b4552c8b5bf1cb04d7e4adbfc331f47a23507a2f69": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Text",
          "Text"
        ]
      }
    },
    "query": "UPDATE users SET current_ident = null WHERE mxid = $1 AND current_ident = $2;"
  },
  "d76d45b4beeda623ae55eff4a68ce320a7741a5b5a1851508a3ce5c2d8eedc23": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Text"
        ]
      }
    },
    "query": "INSERT INTO users (mxid) VALUES ($1) ON CONFLICT DO NOTHING;"
  },
  "f16c64ed3d2565d725ef0b4eca4cfc871a5435e281756a7a0b3a7464b9ebd7e4": {
    "describe": {
      "columns": [
        {
          "name": "mxid",
          "ordinal": 0,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": []
      }
    },
    "query": "SELECT mxid FROM users"
  }
}